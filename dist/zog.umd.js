!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ZogLibrary={})}(this,function(e){"use strict";let t=null;class n{constructor(){this.subs=new Set}depend(){t&&this.subs.add(t)}notify(){this.subs.forEach(e=>e())}}function o(e){const n=t;t=e;try{e()}finally{t=n}}const r=(e,t)=>{try{const n=Object.keys(t),o=n.map(e=>t[e]?._isRef?t[e].value:t[e]);return new Function(...n,`return ${e}`)(...o)}catch{return}},i=(e,t)=>{if(e){if(3===e.nodeType){const n=e.textContent;return void(n.includes("{{")&&o(()=>{e.textContent=n.replace(/{{\s*(.*?)\s*}}/g,(e,n)=>r(n,t))}))}if(1===e.nodeType){if(e.hasAttribute("z-if")){const n=[];let s=e;const c=e.parentNode;if(!c)return;const f=document.createComment("z-if");for(c.insertBefore(f,e);s;){const e=["z-if","z-else-if","z-else"].find(e=>s.hasAttribute(e));if(!e)break;const t=s.getAttribute(e);s.removeAttribute(e),n.push({el:s,exp:t,type:e});const o=s.nextElementSibling;s.remove(),s=o}return void o(()=>{const e=n.find(e=>"z-else"===e.type||r(e.exp,t));n.forEach(n=>{n===e?document.contains(n.el)||(c.insertBefore(n.el,f.nextSibling),n.el._isCompiled||(n.el._isCompiled=!0,i(n.el,t))):document.contains(n.el)&&n.el.remove()})})}if(!e.hasAttribute("z-else-if")&&!e.hasAttribute("z-else")){if(e.hasAttribute("z-for")){const[n,s]=e.getAttribute("z-for").split(" in ").map(e=>e.trim()),c=e.parentNode;if(!c)return;const f=document.createComment("z-for");c.insertBefore(f,e),e.remove(),e.removeAttribute("z-for");let a=[];return void o(()=>{a.forEach(e=>e.remove()),a=[];const o=r(s,t)||[];Array.isArray(o)&&o.forEach((o,r)=>{const s=e.cloneNode(!0);c.insertBefore(s,f),a.push(s);const l={...t,[n]:{value:o,_isRef:!0},index:r};i(s,l)})})}Array.from(e.attributes).forEach(({name:n,value:i})=>{if(n.startsWith("@")){const o=n.slice(1);e.removeAttribute(n),e.addEventListener(o,e=>{const n=t[i];"function"==typeof n?n(e):r(i,t)})}else if("z-model"===n){e.removeAttribute(n);const s="checkbox"===e.type||"radio"===e.type,c=s?"checked":"value",f=s||"SELECT"===e.tagName?"change":"input";e.addEventListener(f,()=>{let n=e[c];("radio"!==e.type||e.checked)&&t[i]&&(t[i].value=n)}),o(()=>{const n=r(i,t);"radio"===e.type?e.checked=String(e.value)===String(n):e[c]=n})}else if(n.startsWith(":")||n.startsWith("z-")){const s=n.startsWith(":")?n.slice(1):n;n.startsWith(":")&&e.removeAttribute(n),o(()=>{const n=r(i,t);"z-text"===s?e.textContent=n:"z-html"===s?e.innerHTML=n:"z-show"===s?e.style.display=n?"":"none":"style"===s&&"object"==typeof n?Object.assign(e.style,n):"class"===s&&"object"==typeof n?e.className=Object.keys(n).filter(e=>n[e]).join(" "):e.setAttribute(s,n)})}}),e.childNodes.forEach(e=>i(e,t))}}}};e.createApp=function(e){return{mount(t){const n=document.querySelector(t),o=e();i(n,o)}}},e.ref=function(e){const t=new n;return{_isRef:!0,get value(){return t.depend(),e},set value(n){n!==e&&(e=n,t.notify())},toString:()=>e}},e.watchEffect=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
